"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{4702:(e,r,t)=>{t.r(r),t.d(r,{default:()=>p});var s=t(5155),a=t(2115),l=t(5711),i=t(6306),n=t(3286),d=t(6517),o=t(9099),c=t(4416),m=t(8164),x=t(3897),u=t(4390),h=t(6356),b=t(7489),g=t(3520);let p=()=>{let[e,r]=(0,a.useState)(!1),t=(0,a.useRef)(null),[p,f]=(0,a.useState)(null),[y,j]=(0,a.useState)([]),[v,w]=(0,a.useState)(0),[N,k]=(0,a.useState)(0),[S,C]=(0,a.useState)(!1),[F,L]=(0,a.useState)(0),A=(0,a.useRef)(!1),[_,I]=(0,a.useState)(!1),R=(0,a.useRef)(null),E=(0,a.useRef)(null),K=(0,a.useRef)(null),T=async()=>{try{C(!0),L(0),A.current=!0,t.current=await l.I8.invoke("detect_arduino"),await l.I8.invoke("start_streaming",{portName:t.current,stream_name:"UDL"}),r(!0),C(!1)}catch(e){console.error("Failed to connect to device:",e)}},W=async()=>{try{C(!0),L(0),await l.I8.invoke("start_wifistreaming"),A.current=!0}catch(e){console.error("Failed to connect to device:",e)}},V=async()=>{try{I(!0),L(0),A.current=!0,await l.I8.invoke("scan_ble_devices")}catch(e){console.error("Failed to connect to device:",e)}},D=()=>{R.current&&(E.current=new h.SmoothieChart({limitFPS:20,grid:{strokeStyle:"rgb(75, 85, 99)",lineWidth:1,millisPerLine:8e3,verticalSections:6,borderVisible:!1},labels:{fillStyle:"#ffffff",fontSize:12,precision:0,showIntermediateLabels:!0,disabled:!1},tooltip:!0,tooltipLine:{lineWidth:1,strokeStyle:"#00FF00"},maxValue:1e3,minValue:0,responsive:!0,millisPerPixel:100,yRangeFunction:()=>({min:0,max:1e3})}),K.current=new h.TimeSeries,E.current.addTimeSeries(K.current,{strokeStyle:"rgb(0, 255, 0)",lineWidth:2,fillStyle:"rgba(0, 255, 0, 0.1)"}),E.current.streamTo(R.current,50))};(0,a.useEffect)(()=>{if(e)return D(),()=>{E.current&&R.current&&(E.current.stop(),E.current=null,K.current=null)}},[e]),(0,a.useEffect)(()=>{let e=[];return(async()=>{let t=await (0,x.KT)("bleDevices",e=>{j(e.payload)});e.push(t);let s=await (0,x.KT)("samplerate",e=>{let r=Math.ceil(Number(e.payload));if(w(r),L(e=>e+r),K.current){let e=Date.now();K.current.append(e,r),console.log("Appended: ".concat(e,", ").concat(r))}});e.push(s);let a=await (0,x.KT)("connection",()=>{r(!0),C(!1)});e.push(a);let l=await (0,x.KT)("samplelost",e=>{k(e.payload)});e.push(l)})(),()=>{for(let r of e)r()}},[]);let U=e=>{switch(e){case"bluetooth":default:return(0,s.jsx)(i.A,{className:"mr-2"});case"serial":return(0,s.jsx)(n.A,{className:"mr-2"});case"wifi":return(0,s.jsx)(d.A,{className:"mr-2"})}},B=async e=>{await (0,u.ho)(e)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:" flex-col bg-gray-200 overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gray-800   p-6 ",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h2",{className:"flex items-center text-2xl font-semibold text-white gap-2",children:[(0,s.jsx)("div",{className:"font-rancho font-bold text-2xl duration-300 bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 text-transparent bg-clip-text",children:"Chords"}),"LSL Connector "]}),(0,s.jsxs)("button",{onClick:()=>B("https://github.com/upsidedownlabs/Chords-Arduino-Firmware"),className:"flex items-center cursor-pointer gap-2 px-3 py-1 bg-gray-600 hover:bg-gray-700 dark:bg-gray-500 dark:hover:bg-gray-600 text-white rounded-md text-sm transition-colors",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"})," Get Firmware"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{type:"bluetooth",title:"Bluetooth LE",description:"For wireless Bluetooth LE connectivity"},{type:"serial",title:"Serial",description:"For direct wired USB serial connections"},{type:"wifi",title:"WiFi",description:"For wireless WiFi network connectivity"}].map(e=>(0,s.jsx)("div",{onClick:()=>{if(!p)switch(f(e.type),j([]),e.type){case"bluetooth":V(),I(!0);break;case"serial":T();break;case"wifi":W();break;default:console.log("Unknown type selected")}},className:"group relative p-[2px] rounded-lg transition-all duration-300 \n                  ".concat(p?"pointer-events-none":"cursor-pointer","\n                  ").concat(p===e.type?"bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 animate-gradient-move":null!=p?"bg-white":"bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500"),children:(0,s.jsxs)("div",{className:"relative rounded-lg p-4 transition-all duration-200 border border-transparent bg-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center text-white",children:[U(e.type),(0,s.jsx)("span",{className:"font-medium",children:e.title})]}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:e.description})]})},e.type))}),(0,s.jsxs)("div",{className:"flex w-full items-center gap-2 p-2 bg-blue-900/20 rounded-lg border border-blue-800 mt-4 ",children:[(0,s.jsx)("span",{className:"text-white text-sm pl-2",children:"Visualise/Record your signals using"}),(0,s.jsxs)("button",{onClick:()=>B("https://www.brainproducts.com/downloads/more-software/"),className:"flex items-center gap-2 px-3 py-1 bg-pink-500  text-white rounded-md text-sm transition-colors cursor-pointer ",children:["BV LSL Viewer ",(0,s.jsx)(b.g,{icon:g.tQI})]}),(0,s.jsxs)("button",{onClick:()=>B("https://open-ephys.org/gui"),className:"flex items-center gap-2 px-3 py-1 bg-purple-600  text-white rounded-md text-sm transition-colors cursor-pointer",children:["OE GUI  ",(0,s.jsx)(b.g,{icon:g.tQI}),(0,s.jsx)(b.g,{icon:g.qKs}),(0,s.jsx)(b.g,{icon:g.lWK})]}),(0,s.jsxs)("button",{onClick:()=>B("https://github.com/labstreaminglayer/App-LabRecorder/releases/tag/v1.16.5"),className:"flex items-center gap-2 px-3 py-1 bg-blue-500 text-white rounded-md text-sm transition-colors cursor-pointer",children:["LabRecorder ",(0,s.jsx)(b.g,{icon:g.tQI}),(0,s.jsx)(b.g,{icon:g.qKs}),(0,s.jsx)(b.g,{icon:g.lWK})]}),(0,s.jsx)("button",{onClick:()=>B("https://labstreaminglayer.readthedocs.io/info/viewers.html"),className:"flex items-center gap-2 px-3 py-1 bg-green-600  text-white rounded-md text-sm transition-colors cursor-pointer",children:"More +"})]}),e?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-2 border border-gray-700 mt-2",children:[(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Connection Statistics"})}),(0,s.jsxs)("div",{className:"h-[12.5rem] bg-black rounded-lg border border-gray-600 relative",children:[(0,s.jsx)("div",{className:"bg-gray-900 w-full h-full rounded-lg",children:(0,s.jsx)("canvas",{ref:R,className:"w-full h-full rounded-lg"})}),(0,s.jsx)("div",{className:"absolute top-2 left-2 text-white text-xs space-y-1",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("span",{className:"flex items-center gap-2 p-2 bg-blue-900/20 rounded-lg border border-blue-800",children:["Sampling Rate: ",v||0,"â€¯Hz"]}),(0,s.jsxs)("span",{className:"flex items-center gap-2 p-2 bg-blue-900/20 rounded-lg border border-blue-800",children:["Samples Lost: ",N||0]}),(0,s.jsxs)("span",{className:"flex items-center gap-2 p-2 bg-blue-900/20 rounded-lg border border-blue-800",children:["Total Samples: ",F]})]})})]})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white mb-2 mt-4",children:"Connectivity Guide"}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[(0,s.jsx)("div",{className:"mb-4 p-2 bg-red-900/20 rounded-lg border border-red-800",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,s.jsx)("p",{className:"text-white text-sm font-medium",children:"Device Not connected, please follow the steps below to connect your device."})]})}),(0,s.jsxs)("div",{className:"space-x-6 flex",children:[(0,s.jsx)("div",{className:"flex-1 bg-gray-700 rounded-lg p-4 border border-gray-600",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-900 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-blue-200 font-semibold text-sm",children:"1"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-medium text-white mb-2",children:"Upload Chords Arduino Firmware"}),(0,s.jsxs)("p",{className:"text-gray-400 text-sm",children:["Visit ",(0,s.jsx)("a",{className:"underline text-blue-400",href:"https://github.com/upsidedownlabs/Chords-Arduino-Firmware",target:"_blank",rel:"noopener noreferrer",children:"Chords Arduino Firmware repository"})," and upload the firmware for your development board."]})]})]})}),(0,s.jsx)("div",{className:"flex-1 bg-gray-700 rounded-lg p-4 border border-gray-600",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-900 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-green-400 font-semibold text-sm",children:"2"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-medium text-white mb-2",children:"Connect your development board"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Connect your board via Serial/BLE/WiFi and follow steps on screen to start the LSL stream."})]})]})})]})]})]})]}),_&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 border border-gray-200 dark:border-gray-700 max-h-[90vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"border-b border-gray-200 dark:border-gray-700 p-4 flex justify-between items-center flex-shrink-0",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Available Devices"})}),(0,s.jsx)("button",{onClick:()=>{I(!1)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,s.jsx)(c.A,{className:"h-5 w-5"})})]}),(0,s.jsx)("div",{className:"p-6 text-gray-900 dark:text-white overflow-y-auto flex-1 min-h-0",children:y.length>0?(0,s.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,s.jsxs)("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 flex justify-between items-center transition-colors",onClick:async()=>{await l.I8.invoke("connect_to_ble",{deviceId:e.id}),r(!0),I(!1)},children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-5 w-5 mr-3 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:(0,s.jsx)("div",{className:"h-2 w-2 bg-blue-600 dark:bg-blue-400 rounded-full animate-pulse"})}),(0,s.jsx)("span",{className:"text-gray-900 dark:text-white truncate",children:e.name||"Unknown Device (".concat(e.id,")")})]}),(0,s.jsx)(m.A,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 ml-2"})]},e.id))}):(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 dark:border-blue-400 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Scanning for devices..."})]})})]})}),S&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 border border-gray-200 dark:border-gray-700 max-h-[90vh] flex flex-col",children:(0,s.jsx)("div",{className:"p-6 text-gray-900 dark:text-white overflow-y-auto flex-1 min-h-0",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 dark:border-blue-400 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Connecting..."})]})})})})]})})}}}]);